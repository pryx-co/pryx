import{j as e}from"./jsx-runtime.D_zvdyIk.js";import{r as l}from"./index.DiEladB3.js";function w({device:r}){const o=s=>{switch(s){case"online":return"#10b981";case"syncing":return"#3b82f6";case"offline":return"#6b7280";default:return"#6b7280"}},n=s=>{switch(s){case"host":return"ðŸ–¥ï¸";case"mobile":return"ðŸ“±";case"cli":return"âŒ¨ï¸";case"web":return"ðŸŒ";default:return"â“"}},x=s=>{const a=Date.now()-s;return a<6e4?"Just now":a<36e5?`${Math.floor(a/6e4)}m ago`:new Date(s).toLocaleTimeString()};return e.jsxs("div",{style:{border:"1px solid #333",borderRadius:8,padding:"1rem",backgroundColor:"#111",display:"flex",flexDirection:"column",gap:"0.5rem",minWidth:"200px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{style:{fontSize:"1.5rem"},children:n(r.type)}),e.jsx("span",{style:{fontSize:"0.75rem",color:o(r.status),border:`1px solid ${o(r.status)}`,padding:"2px 6px",borderRadius:"12px"},children:r.status.toUpperCase()})]}),e.jsx("div",{style:{fontWeight:"bold"},children:r.name}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#9ca3af"},children:["ID: ",r.id.slice(0,8),"..."]}),e.jsxs("div",{style:{fontSize:"0.75rem",color:"#6b7280"},children:["seen ",x(r.lastSeen)]})]})}function C(){const[r,o]=l.useState([]);return l.useEffect(()=>{const n=[{id:"dev-12345678",name:"MacBook Pro",type:"host",status:"online",lastSeen:Date.now()},{id:"dev-87654321",name:"iPhone 15",type:"mobile",status:"syncing",lastSeen:Date.now()-12e4},{id:"dev-cli-001",name:"Dev Server",type:"cli",status:"offline",lastSeen:Date.now()-864e5}];o(n)},[]),e.jsxs("section",{style:{marginBottom:"2rem"},children:[e.jsxs("h2",{style:{fontSize:"1rem",marginBottom:"1rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{children:"â˜ï¸"})," Cloud Devices"]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"1rem"},children:[r.map(n=>e.jsx(w,{device:n},n.id)),r.length===0&&e.jsx("div",{style:{color:"#6b7280",fontStyle:"italic"},children:"No devices found."})]})]})}function z(){const[r,o]=l.useState([]),[n,x]=l.useState(null),[s,a]=l.useState(null),[h,g]=l.useState(!1);l.useEffect(()=>{const t=new WebSocket("ws://localhost:3000/ws");return t.onopen=()=>g(!0),t.onclose=()=>g(!1),t.onmessage=c=>{try{const i=JSON.parse(c.data);i.event==="trace.event"?o(p=>[...p.slice(-99),i.payload]):i.event==="session.stats"&&x(i.payload)}catch{}},()=>t.close()},[]);const f=t=>t?t<1e3?`${t}ms`:`${(t/1e3).toFixed(2)}s`:"-",S=t=>`$${t.toFixed(4)}`,y=t=>{if(t.status==="error")return"#ef4444";if(t.status==="running")return"#f59e0b";switch(t.type){case"tool_call":return"#3b82f6";case"approval":return"#8b5cf6";case"message":return"#10b981";default:return"#6b7280"}},u=600,j=Date.now(),d=6e4;return e.jsxs("div",{style:{padding:"1rem",fontFamily:"system-ui",maxWidth:"1200px",margin:"0 auto"},children:[e.jsxs("header",{style:{display:"flex",justifyContent:"space-between",marginBottom:"2rem"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"1.5rem"},children:[e.jsxs("h1",{style:{margin:0,fontSize:"1.5rem",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{children:"âš¡"})," Pryx Cloud"]}),e.jsxs("nav",{style:{display:"flex",gap:"1rem",fontSize:"0.9rem"},children:[e.jsx("a",{href:"/dashboard",style:{color:"#fff",textDecoration:"none",fontWeight:"bold"},children:"Dashboard"}),e.jsx("a",{href:"/skills",style:{color:"#9ca3af",textDecoration:"none"},children:"Skills"})]})]}),e.jsxs("span",{style:{color:h?"#10b981":"#ef4444",display:"flex",alignItems:"center",gap:"0.5rem"},children:[e.jsx("span",{style:{width:8,height:8,borderRadius:"50%",backgroundColor:h?"#10b981":"#ef4444"}}),h?"Live":"Offline"]})]}),e.jsx(C,{}),n&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"1rem",marginBottom:"1.5rem"},children:[e.jsx(m,{label:"Cost",value:S(n.cost),color:"#f59e0b"}),e.jsx(m,{label:"Tokens",value:n.tokens.toLocaleString(),color:"#3b82f6"}),e.jsx(m,{label:"Duration",value:f(n.duration),color:"#10b981"}),e.jsx(m,{label:"Events",value:n.eventCount.toString(),color:"#8b5cf6"})]}),e.jsxs("section",{children:[e.jsx("h2",{style:{fontSize:"1rem",marginBottom:"0.5rem"},children:"Trace Timeline"}),e.jsx("div",{style:{border:"1px solid #333",borderRadius:8,padding:"1rem",backgroundColor:"#111"},children:e.jsx("svg",{width:u,height:Math.max(r.length*24+20,100),children:r.map((t,c)=>{const i=Math.max(0,(t.startTime-(j-d))/d),p=t.endTime?Math.min(1,(t.endTime-(j-d))/d):1,b=i*u,v=Math.max(4,(p-i)*u);return e.jsxs("g",{onClick:()=>a(t),children:[e.jsx("rect",{x:b,y:c*24+4,width:v,height:18,rx:4,fill:y(t),style:{cursor:"pointer"}}),e.jsx("text",{x:b+4,y:c*24+16,fontSize:10,fill:"#fff",children:t.name.slice(0,20)})]},t.id)})})})]}),s&&e.jsxs("section",{style:{marginTop:"1rem"},children:[e.jsx("h2",{style:{fontSize:"1rem",marginBottom:"0.5rem"},children:"Event Details"}),e.jsxs("div",{style:{border:"1px solid #333",borderRadius:8,padding:"1rem",backgroundColor:"#111",fontSize:"0.875rem"},children:[e.jsxs("p",{children:[e.jsx("strong",{children:"ID:"})," ",s.id]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Type:"})," ",s.type]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",s.name]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Status:"})," ",s.status]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Duration:"})," ",f(s.duration)]}),s.correlationId&&e.jsxs("p",{children:[e.jsx("strong",{children:"Correlation ID:"})," ",s.correlationId]}),s.error&&e.jsxs("p",{style:{color:"#ef4444"},children:[e.jsx("strong",{children:"Error:"})," ",s.error]})]})]}),e.jsxs("section",{style:{marginTop:"1rem"},children:[e.jsx("h2",{style:{fontSize:"1rem",marginBottom:"0.5rem"},children:"Recent Events"}),e.jsx("div",{style:{border:"1px solid #333",borderRadius:8,overflow:"hidden",backgroundColor:"#111"},children:r.slice(-10).reverse().map(t=>e.jsxs("div",{style:{padding:"0.5rem 1rem",borderBottom:"1px solid #222",display:"flex",alignItems:"center",gap:"0.5rem",fontSize:"0.875rem"},children:[e.jsx("span",{style:{width:8,height:8,borderRadius:"50%",backgroundColor:y(t)}}),e.jsx("span",{style:{color:"#9ca3af"},children:t.type}),e.jsx("span",{children:t.name}),e.jsx("span",{style:{marginLeft:"auto",color:"#6b7280"},children:f(t.duration)})]},t.id))})]})]})}function m({label:r,value:o,color:n}){return e.jsxs("div",{style:{border:"1px solid #333",borderRadius:8,padding:"1rem",backgroundColor:"#111"},children:[e.jsx("div",{style:{fontSize:"0.75rem",color:"#9ca3af",marginBottom:"0.25rem"},children:r}),e.jsx("div",{style:{fontSize:"1.5rem",fontWeight:"bold",color:n},children:o})]})}export{z as default};
